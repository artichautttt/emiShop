<div class="container mt-5 mb-5" style="min-height: 80vh;">

  @if (loading) {
    <div class="text-center py-5">
      <div class="spinner-border text-warning" role="status"></div>
      <p class="mt-2 text-muted">Chargement des détails...</p>
    </div>
  }

  @else if (errorMsg) {
    <div class="alert alert-danger text-center">
      <h4>Oups !</h4>
      <p>{{ errorMsg }}</p>
      <a routerLink="/" class="btn btn-outline-danger">Retour à l'accueil</a>
    </div>
  }

  @else if (product) {

    <a routerLink="/" class="btn btn-outline-dark mb-4 border-0 ps-0 fw-bold">
      <i class="bi bi-arrow-left me-2"></i> Retour au catalogue
    </a>

    <div class="bg-white p-5 rounded shadow-sm">
      <div class="row">

        <div class="col-md-6 text-center mb-4 mb-md-0">
          <img [src]="product.thumbnail"
               alt="{{ product.title }}"
               class="img-fluid rounded shadow-sm"
               style="max-height: 400px; object-fit: contain;">

          <div class="d-flex justify-content-center gap-2 mt-3 overflow-auto">
            @for (img of product.images; track img) {
              <img [src]="img" class="border rounded" style="width: 60px; height: 60px; object-fit: cover;">
            }
          </div>
        </div>

        <div class="col-md-6">
          <small class="text-uppercase text-muted fw-bold">{{ product.category }}</small>
          <h1 class="fw-bold mb-3">{{ product.title }}</h1>

          <div class="mb-3 text-warning fs-5">
            <i class="bi bi-star-fill"></i> {{ product.rating }} / 5
            <span class="text-muted fs-6 ms-2">({{ product.stock }} en stock)</span>
          </div>

          <h2 class="fw-bold text-danger mb-4">{{ product.price }} MAD</h2>
          <p class="lead text-secondary mb-5">{{ product.description }}</p>

          <button (click)="addToCart()"
                  class="btn btn-lg w-100 fw-bold py-3 transition-all"
                  [class.btn-success]="isAdded"
                  [class.btn-warning]="!isAdded">
            {{ isAdded ? 'Produit ajouté !' : 'Ajouter au panier' }}
          </button>

          <div class="mt-5">
            <h5 class="border-bottom pb-2">Infos techniques</h5>
            <ul class="list-unstyled mt-3">
              <li><strong>Marque:</strong> {{ product.brand }}</li>
              <li><strong>Référence:</strong> {{ product.sku }}</li>
              <li><strong>Poids:</strong> {{ product.weight }}</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  }
</div>
